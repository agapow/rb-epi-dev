<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=UTF-8" />
<title>Class: Relais::Dev::IO::BaseIO</title>
<link rel="stylesheet" href="../../../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../../..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../../_index.html">Index (B)</a> &raquo; 
    <span class='title'><a href="../../../Relais.html" title="Relais (module)">Relais</a></span> &raquo; <span class='title'><a href="../../Dev.html" title="Relais::Dev (module)">Dev</a></span> &raquo; <span class='title'><a href="../IO.html" title="Relais::Dev::IO (module)">IO</a></span>
     &raquo; 
    <span class="title">BaseIO</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Relais::Dev::IO::BaseIO 
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Relais::Dev::IO::BaseIO</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/relais-dev/io/base.rb</dd>
  
</dl>
<div class="clear"></div>

<div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><a href="BaseReader.html" title="Relais::Dev::IO::BaseReader (class)">BaseReader</a>, <a href="BaseWriter.html" title="Relais::Dev::IO::BaseWriter (class)">BaseWriter</a></p>
</div>


  <h2>Instance Attribute Summary</h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#file_open-instance_method" title="#file_open (instance method)">- (Object) <strong>file_open</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  

  
    <span class="summary_desc">
Returns the value of attribute file_open.

</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#hndl-instance_method" title="#hndl (instance method)">- (Object) <strong>hndl</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  

  
    <span class="summary_desc">
Returns the value of attribute hndl.

</span>
  
</li>

    
  </ul>


  <h2>Class Method Summary</h2>

  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#use_with-class_method" title="use_with (class method)">+ (Object) <strong>use_with</strong>(io_or_path, opts = {}, &amp;block) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">
Create an IO object, pass it for use and then finish it off.

</span>
  
</li>

    
  </ul>

  <h2>Instance Method Summary</h2>

  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#finalize-instance_method" title="#finalize (instance method)">- (Object) <strong>finalize</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">
Destructor.

</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#finish-instance_method" title="#finish (instance method)">- (Object) <strong>finish</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">
Do any necessary teardown to complete IO.

</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (BaseIO) <strong>initialize</strong>(io_or_path, mode) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  

  
    <span class="summary_desc">
A new instance of BaseIO.

</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#prepare-instance_method" title="#prepare (instance method)">- (Object) <strong>prepare</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">
Do any necessary setup to commence IO.

</span>
  
</li>

    
  </ul>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><a href="" title="Relais::Dev::IO::BaseIO (class)">BaseIO</a></tt>) <strong>initialize</strong>(io_or_path, mode) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
A new instance of BaseIO
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/relais-dev/io/base.rb', line 29</span>

<span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='io_or_path identifier id'>io_or_path</span><span class='comma token'>,</span> <span class='mode identifier id'>mode</span><span class='rparen token'>)</span>
  <span class='comment val'># TODO: what if it's a Pathname?</span>
    
  <span class='comment val'># if passed a filepath, open it</span>
  <span class='is_path identifier id'>is_path</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='io_or_path identifier id'>io_or_path</span><span class='dot token'>.</span><span class='class identifier id'>class</span> <span class='eq op'>==</span> <span class='String constant id'>String</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='is_path identifier id'>is_path</span>
    <span class='@hndl ivar id'>@hndl</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='io_or_path identifier id'>io_or_path</span><span class='comma token'>,</span> <span class='mode identifier id'>mode</span><span class='rparen token'>)</span>
    <span class='@file_open ivar id'>@file_open</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
  <span class='else else kw'>else</span>
    <span class='@hndl ivar id'>@hndl</span> <span class='assign token'>=</span> <span class='io_or_path identifier id'>io_or_path</span>
    <span class='@file_open ivar id'>@file_open</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
  <span class='end end kw'>end</span>
  <span class='prepare identifier id'>prepare</span><span class='lparen token'>(</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="file_open=-instance_method"></span>
      <span id="file_open-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="file_open-instance_method">
  
    - (<tt>Object</tt>) <strong>file_open</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute file_open
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


27
28
29</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/relais-dev/io/base.rb', line 27</span>

<span class='def def kw'>def</span> <span class='file_open identifier id'>file_open</span>
  <span class='@file_open ivar id'>@file_open</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="hndl=-instance_method"></span>
      <span id="hndl-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="hndl-instance_method">
  
    - (<tt>Object</tt>) <strong>hndl</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute hndl
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


27
28
29</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/relais-dev/io/base.rb', line 27</span>

<span class='def def kw'>def</span> <span class='hndl identifier id'>hndl</span>
  <span class='@hndl ivar id'>@hndl</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="use_with-class_method">
  
    + (<tt>Object</tt>) <strong>use_with</strong>(io_or_path, opts = {}, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Create an IO object, pass it for use and then finish it off.
</p>
<p>
This allows easy use of an IO object within a block.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


80
81
82
83
84
85</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/relais-dev/io/base.rb', line 80</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='use_with identifier id'>use_with</span><span class='lparen token'>(</span><span class='io_or_path identifier id'>io_or_path</span><span class='comma token'>,</span> <span class='opts identifier id'>opts</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='io identifier id'>io</span> <span class='assign token'>=</span> <span class='BaseIO constant id'>BaseIO</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='io_or_path identifier id'>io_or_path</span><span class='comma token'>,</span> <span class='opts identifier id'>opts</span><span class='rparen token'>)</span>
  <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='block identifier id'>block</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='io identifier id'>io</span><span class='rparen token'>)</span>
  <span class='io identifier id'>io</span><span class='dot token'>.</span><span class='finish identifier id'>finish</span><span class='lparen token'>(</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='result identifier id'>result</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="finalize-instance_method">
  
    - (<tt>Object</tt>) <strong>finalize</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Destructor.
</p>
<p>
This simply ensures that any file opened by object is closed.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


48
49
50
51
52</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/relais-dev/io/base.rb', line 48</span>

<span class='def def kw'>def</span> <span class='finalize identifier id'>finalize</span><span class='lparen token'>(</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='@file_open ivar id'>@file_open</span>
    <span class='@hndl ivar id'>@hndl</span><span class='dot token'>.</span><span class='close identifier id'>close</span><span class='lparen token'>(</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>  
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="finish-instance_method">
  
    - (<tt>Object</tt>) <strong>finish</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Do any necessary teardown to complete IO.
</p>
<p>
Currently all this does is close any file handle that is opened by the IO
object. However specialised subclasses may have to override this to handle
footer information or terminating tags, etc.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


71
72
73
74</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/relais-dev/io/base.rb', line 71</span>

<span class='def def kw'>def</span> <span class='finish identifier id'>finish</span><span class='lparen token'>(</span><span class='rparen token'>)</span>
  <span class='@hndl ivar id'>@hndl</span><span class='dot token'>.</span><span class='close identifier id'>close</span><span class='lparen token'>(</span><span class='rparen token'>)</span>
  <span class='@file_open ivar id'>@file_open</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="prepare-instance_method">
  
    - (<tt>Object</tt>) <strong>prepare</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Do any necessary setup to commence IO.
</p>
<p>
This is called from the constructor to handle anything that has to be done
in preparation for IO. Currently it does nothing but specialised subclasses
may have to override this to handle header information opening tags, etc.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


61
62
63</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/relais-dev/io/base.rb', line 61</span>

<span class='def def kw'>def</span> <span class='prepare identifier id'>prepare</span><span class='lparen token'>(</span><span class='rparen token'>)</span>
  <span class='comment val'># to be overridden in subclasses </span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Wed Jan 27 14:11:13 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool">yard</a>
  0.5.3 (ruby-1.8.5).
</div>

  </body>
</html>