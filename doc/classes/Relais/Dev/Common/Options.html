<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Relais::Dev::Common::Options</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Relais::Dev::Common::Options</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../../../files/lib/relais-dev/common_rb.html">
                lib/relais-dev/common.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="../Base/FixedStruct.html">
                Relais::Dev::Base::FixedStruct
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">
    <div id="diagram">
      <map id="map" name="map">
  <area shape="rect" coords="211,191,296,239"      href="../Base/FixedStruct.html" alt="FixedStruct" />
  <area shape="rect" coords="217,309,289,357"      href="Options.html" alt="Options" />
  <area shape="rect" coords="811,408,904,456"      href="../IO/RecordWriter.html" alt="RecordWriter" />
  <area shape="rect" coords="819,507,896,555"      href="../IO/LineWriter.html" alt="LineWriter" />
  <area shape="rect" coords="696,309,784,357"      href="../IO/BaseReader.html" alt="BaseReader" />
  <area shape="rect" coords="688,408,787,456"      href="../IO/RecordReader.html" alt="RecordReader" />
  <area shape="rect" coords="695,507,780,555"      href="../IO/LineReader.html" alt="LineReader" />
  <area shape="rect" coords="813,309,896,357"      href="../IO/BaseWriter.html" alt="BaseWriter" />
  <area shape="rect" coords="787,191,859,239"      href="../IO/BaseIO.html" alt="BaseIO" />
  <area shape="rect" coords="211,5,296,53"      href="../../../OpenStruct.html" alt="OpenStruct" />
  <area shape="rect" coords="331,5,403,53"      href="../../../Hash.html" alt="Hash" />
  <area shape="rect" coords="320,191,413,239"      href="../Base/OrderedHash.html" alt="OrderedHash" />
  <area shape="rect" coords="456,5,555,53"      href="../../../RecordReader.html" alt="RecordReader" />
  <area shape="rect" coords="472,191,555,239"      href="../I0/CsvReader.html" alt="CsvReader" />
  <area shape="rect" coords="579,5,672,53"      href="../../../RecordWriter.html" alt="RecordWriter" />
  <area shape="rect" coords="579,191,656,239"      href="../I0/CsvWriter.html" alt="CsvWriter" />
  <area shape="rect" coords="180,276,300,368"      href="../Common.html" alt="Common" />
  <area shape="rect" coords="677,157,915,565"      href="../IO.html" alt="IO" />
  <area shape="rect" coords="173,157,424,249"      href="../Base.html" alt="Base" />
  <area shape="rect" coords="435,157,667,249"      href="../I0.html" alt="I0" />
  <area shape="rect" coords="69,180,163,227"      href="../Math.html" alt="Math" />
  <area shape="rect" coords="43,124,925,576"      href="../../Dev.html" alt="Dev" />
  <area shape="rect" coords="16,91,936,587"      href="../../../Relais.html" alt="Relais" />
</map>
<img src="../../../../dot/f_4.png" usemap="#map" border="0" alt="dot/f_4.png">
    </div>

    <div id="description">
      <p>
<a href="Options.html">Options</a> and their default values for scripts and
functions.
</p>
<p>
<a href="Options.html">Options</a> are traditionally handled within Ruby by
juggling and merging hashes. This works fine except for the danger of
mispelling silently going unnoticed:
</p>
<pre>
  options = {:overwrite_data =&gt; true}
  ...
  options[:overwrite_date] = false
  ...
  if options[:overwrite_data]
  ...
</pre>
<p>
and the slightly awkward lookup required to get and set value. This class
solves these problems by implementing options as an OpenStruct that cannot
add attributes after construction. Thus options are accessed as simple
attributes and attempting to access a mispelt options results in an error.
Also, readability is helped by making intent clear in the class name:
</p>
<pre>
  options = Options.new(:overwrite_data =&gt; true, :message =&gt; &quot;foo&quot;)
  ...
  options.overwrite_date = false   # error!
  ...
  if options.overwrite_data        # easier
  ...
</pre>
<p>
<a href="Options.html">Options</a> can be created with the same syntax as
OpenStruct:
</p>
<pre>
  # pass keyword arguments
  my_opt = Options.new(:overwrite_data =&gt; true, :message =&gt; &quot;foo&quot;)
  # or a hash if you prefer
  my_opt = Options.new({:overwrite_data =&gt; true, :message =&gt; &quot;foo&quot;})
</pre>
<p>
Usage would typically be:
</p>
<pre>
  def myfunc (arg1, arg2, opts={})
     options = Options.new(
       :overwrite_data =&gt; true,
       :message =&gt;  &quot;foo&quot;,
     ).update(opts)
</pre>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000020">==</a>&nbsp;&nbsp;
      <a href="#M000019">delete_field</a>&nbsp;&nbsp;
      <a href="#M000021">update</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000020" class="method-detail">
        <a name="M000020"></a>

        <div class="method-heading">
          <a href="#M000020" class="method-signature">
          <span class="method-name">==</span><span class="method-args">(other)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Compare this object and <tt>other</tt> for equality.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000020-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000020-source">
<pre>
<span class="ruby-comment cmt"># File lib/relais-dev/common.rb, line 136</span>
                                <span class="ruby-keyword kw">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">other</span>)
                                        <span class="ruby-comment cmt"># TODO: change to do class comparison and make clearer </span>
                                        <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span>(<span class="ruby-identifier">other</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">OpenStruct</span>))
                                        <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@table</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">table</span>
                                <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000019" class="method-detail">
        <a name="M000019"></a>

        <div class="method-heading">
          <a href="#M000019" class="method-signature">
          <span class="method-name">delete_field</span><span class="method-args">(name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Remove the named attribute from the object.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000019-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000019-source">
<pre>
<span class="ruby-comment cmt"># File lib/relais-dev/common.rb, line 130</span>
                                <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete_field</span>(<span class="ruby-identifier">name</span>)
                                        <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;can't delete from #{self.class} once created&quot;</span>, <span class="ruby-identifier">caller</span>(<span class="ruby-value">1</span>)
                                <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000021" class="method-detail">
        <a name="M000021"></a>

        <div class="method-heading">
          <a href="#M000021" class="method-signature">
          <span class="method-name">update</span><span class="method-args">(hsh)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Update the fields with the passed values.
</p>
<p>
@param [Hash, each_pair] hsh A hash of attribute (key) / value
</p>
<pre>
  pairs.
</pre>
<p>
Normally this would be used to merge passed option values with a default
set. It differs from the Hash method by raising an error if the <a
href="Options.html#M000021">update</a> refers to an attribute that
doesn&#8216;t exist.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000021-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000021-source">
<pre>
<span class="ruby-comment cmt"># File lib/relais-dev/common.rb, line 150</span>
                                <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update</span>(<span class="ruby-identifier">hsh</span>)
                                        <span class="ruby-identifier">hsh</span>.<span class="ruby-identifier">each_pair</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
                                                <span class="ruby-comment cmt"># ???: not sure if this is the right Ruby idiom</span>
                                                <span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value str">&quot;@&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">k</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">v</span>)      
                                        }
                                        <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>
                                <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>